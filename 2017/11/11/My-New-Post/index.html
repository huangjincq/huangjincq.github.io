<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="huangjin"><title>从0用Vue2.5和Elemnt-ui2搭建一个后台模版（1.搭建框架） · Gold_Gold</title><meta name="description" content="前言：用vue做后台管理系统做了半年，最近element-ui升级到2了，所以决定搭建一个基于ele2的后台模版，在这我将手把手javascript:void(null)分享一下如何从0搭建一个后台系统模版。本模版将会长期更新，以后维护中会把常用结局方案常用组件封装在另外一个系统中，模版保障：方便快"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Gold_Gold</a></h3></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>从0用Vue2.5和Elemnt-ui2搭建一个后台模版（1.搭建框架）</a></h3></div><div class="post-content"><blockquote>
<p>前言：用vue做后台管理系统做了半年，最近element-ui升级到2了，所以决定搭建一个基于ele2的后台模版，在这我将手把手javascript:void(null)分享一下如何从0搭建一个后台系统模版。本模版将会长期更新，以后维护中会把常用结局方案常用组件封装在另外一个系统中，模版保障：方便快速开发，极易扩展的一个模版，基于此模版，您只需要修改少量的代码，就能进行开发。<br>分享开发过程，待续未完……</p>
</blockquote>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><a href="www.baidu.com">地址</a><br>此模板内涵盖：</p>
<ol>
<li>登录权限控制</li>
<li>路由跳转拦截</li>
<li>网络请求拦截</li>
<li>侧边导航动态生成</li>
<li>动态换肤</li>
<li>结合Element-ui 2.0版本以上</li>
</ol>
<p>等等包含后台系统常用功能，方便快速开发，极易扩展的一个模版，基于此模版，您只需要修改少量的代码，就能进行开发。</p>
<h2 id="项目主依赖总览"><a href="#项目主依赖总览" class="headerlink" title="项目主依赖总览"></a>项目主依赖总览</h2><ol>
<li><a href="https://cn.vuejs.org/v2/guide/index.html" target="_blank" rel="external">Vue.js</a></li>
<li><a href="https://router.vuejs.org/zh-cn/" target="_blank" rel="external">Vue-router</a></li>
<li><a href="https://vuex.vuejs.org/zh-cn/" target="_blank" rel="external">Vuex</a></li>
<li><a href="https://github.com/axios/axios" target="_blank" rel="external">axios</a> 一个封装了网络请求的库</li>
<li><a href="http://element-cn.eleme.io/#/zh-CN" target="_blank" rel="external">element-ui2</a> 2.0版本以上，最近饿了吗团队除了2.0，1.+年后也不再维护</li>
<li><a href="https://github.com/necolas/normalize.css" target="_blank" rel="external">normalize.css</a> css样式重置</li>
<li><a href="https://github.com/rstacruz/nprogress" target="_blank" rel="external">nprogress</a> 一个加载进度条插件</li>
<li><a href="https://github.com/sindresorhus/screenfull.js" target="_blank" rel="external">screenfull</a> 一个全屏的插件</li>
<li><a href="https://github.com/stylus/stylus" target="_blank" rel="external">stylus</a>、stylus-loader 本项目使用的Css预处理器,也可自行选择其他与处理器</li>
<li><a href="https://github.com/vuejs/eslint-config-vue" target="_blank" rel="external">eslint-config-vue</a> Eslint规则采用Vue源码的官方规则，你可以用自定义或者其他规则，<a href="http://eslint.cn/docs/rules/" target="_blank" rel="external">Eslint规则查询字典</a></li>
</ol>
<h2 id="搭建前准备"><a href="#搭建前准备" class="headerlink" title="搭建前准备"></a>搭建前准备</h2><h3 id="一、环境准备"><a href="#一、环境准备" class="headerlink" title="一、环境准备"></a>一、环境准备</h3><ol>
<li>最新node.js环境安装、npm、yarn、vue-cli脚手架安装这些就不在此多说。</li>
</ol>
<h3 id="二、模拟数据"><a href="#二、模拟数据" class="headerlink" title="二、模拟数据"></a>二、模拟数据</h3><ol>
<li>由于是个人项目，本模板中的数据都为<a href="http://www.easy-mock.com" target="_blank" rel="external">Easy Mock</a>生成的在线模拟数据。有兴趣的可以了解下。<br> 模拟数据的地址接口配置在根目录下 /config/dev.env.js 的相关配置中，改成您的请求地址即可<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = merge(prodEnv, &#123;</span><br><span class="line">  NODE_ENV: <span class="string">'"development"'</span>,</span><br><span class="line">  BASE_API: <span class="string">'"http://www.easy-mock.com/mock/59dc61571de3d46fa94cebc7/lolapp"'</span>  <span class="comment">// 这里换成您的请求地址即可</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>2.接口约定。一般在项目中前后端联系的接口都会有固定的约定，虽然本项目是模拟数据，但是为了做到规范，先简单约定好接口格式，方便后面请求拦截的时候判断，接口约定规则如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1、数据交互统一为JSON格式</span><br><span class="line">2、出参通用格式类似</span><br><span class="line">   &#123;</span><br><span class="line">    &quot;code&quot;: &quot;H0000&quot;,</span><br><span class="line">    &quot;data&quot;: &quot;88888888&quot;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   其中：code指返回码，有具体业务含义，如：</span><br><span class="line">  S0000  系统错误!</span><br><span class="line">  B0000  未登录或登录失效!</span><br><span class="line">  H0000  执行成功</span><br><span class="line"></span><br><span class="line">  首字母</span><br><span class="line">  S: 系统错误</span><br><span class="line">  B: 业务异常</span><br><span class="line">  H: 提示</span><br><span class="line">  M: 消息</span><br><span class="line"></span><br><span class="line">  data指返回的json数据。</span><br><span class="line"></span><br><span class="line">3、登陆后返回session_key，后续每次请求时都须将此作为token加入在header的Authorization信息中。</span><br></pre></td></tr></table></figure></p>
<h3 id="三、跨域问题"><a href="#三、跨域问题" class="headerlink" title="三、跨域问题"></a>三、跨域问题</h3><ol>
<li>由于本模板项目是用的 Easy Mock，不用前端解决跨域问题，但是如果您的实际需求中需要解决跨域问题 可以 百度 cors 跨域 或者 webpack 配置反向代理：这里具体就不详细说明了，百度有很多答案，我这里简单贴个图：<br>webpack配置   ‘config/index.js’<br> <img src="http://upload-images.jianshu.io/upload_images/6914113-40a1de6d20924bd6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="webpack配置.png"><br>axios配置<br><img src="http://upload-images.jianshu.io/upload_images/6914113-a501a8a668ec62d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="axios配置.png"><br>这几个地方对应好了就行</li>
</ol>
<h3 id="四、字体图标"><a href="#四、字体图标" class="headerlink" title="四、字体图标"></a>四、字体图标</h3><p>1.Element-ui里面自带的图标在实际项目中肯定不够用，我是使用的阿里<a href="http://www.iconfont.cn/" target="_blank" rel="external">iconfont</a>字体图标库，注册一个帐号，创建一个项目添加你想要的字体图标，会生成一个cdn的css链接，然后在你的head 里面 link这个样式即可。当你增加新图标的时候更新这个地址就好了。<br><img src="http://upload-images.jianshu.io/upload_images/6914113-6735d398365a6790.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="iconfont.png"></p>
<h3 id="五、关于vuex的使用"><a href="#五、关于vuex的使用" class="headerlink" title="五、关于vuex的使用"></a>五、关于vuex的使用</h3><p>并不是每个项目都必须使用vuex，根据项目需要来使用。对于数据流不复杂的项目，完全可以讲数据保存在本地，也能达到类似的效果也不影响项目需求，vuex我个人感觉使用很繁琐，根据你的项目来进行使用。<br>还是借用官方文档的术语：<br>虽然 Vuex 可以帮助我们管理共享状态，但也附带了更多的概念和框架。这需要对短期和长期效益进行权衡。<br>如果您不打算开发大型单页应用，使用 Vuex 可能是繁琐冗余的。确实是如此——如果您的应用够简单，您最好不要使用 Vuex。一个简单的 <a href="https://cn.vuejs.org/v2/guide/components.html#非父子组件通信" target="_blank" rel="external">global event bus</a> 就足够您所需了</p>
<h2 id="开始搭建"><a href="#开始搭建" class="headerlink" title="开始搭建"></a>开始搭建</h2><h3 id="1-Vue-cli脚手架生成项目"><a href="#1-Vue-cli脚手架生成项目" class="headerlink" title="1. Vue-cli脚手架生成项目"></a>1. Vue-cli脚手架生成项目</h3><p>使用vue官方脚手架生成项目，生成的时候最好选择webpack模版，单元测试，根据你的需求是否安装。</p>
<h3 id="2-目录结构"><a href="#2-目录结构" class="headerlink" title="2. 目录结构"></a>2. 目录结构</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">├── build                      // 构建相关  </span><br><span class="line">├── config                     // 配置相关</span><br><span class="line">├── src                        // 源代码</span><br><span class="line">│   ├── api                    // 所有请求</span><br><span class="line">│   ├── assets                 // 图片 字体等静态资源</span><br><span class="line">│   ├── components             // 全局公用组件</span><br><span class="line">│   ├── directive              // 全局指令</span><br><span class="line">│   ├── filtres                // 全局filter</span><br><span class="line">│   ├── mock                   // mock数据</span><br><span class="line">│   ├── router                 // 路由</span><br><span class="line">│   ├── store                  // 全局store管理</span><br><span class="line">│   ├── styles                 // 全局样式</span><br><span class="line">│   ├── utils                  // 全局公用方法</span><br><span class="line">│   ├── views                  // view</span><br><span class="line">│   ├── App.vue                // 入口页面</span><br><span class="line">│   ├── main.js                // 入口 加载组件 初始化等</span><br><span class="line">│   └── permission.js          // 权限控制 初始用户数据等</span><br><span class="line">├── static                     // 第三方不打包资源</span><br><span class="line">│   ├── img                    // 第三方不打包图片</span><br><span class="line">│   └── theme                  // 主题包</span><br><span class="line">├── .babelrc                   // babel-loader 配置</span><br><span class="line">├── eslintrc.js                // eslint 配置项</span><br><span class="line">├── .gitignore                 // git 忽略项</span><br><span class="line">├── .fjpublish.config.js       // 自动化发布服务器 配置</span><br><span class="line">├── index.html                 // html模板</span><br><span class="line">└── package.json               // package.json</span><br></pre></td></tr></table></figure>
<h3 id="3-webpack配置改造"><a href="#3-webpack配置改造" class="headerlink" title="3.webpack配置改造"></a>3.webpack配置改造</h3><h4 id="3-1-在实际开发过程中，往往有多个环境，开发环境、测试环境、生产环境等等。我们需要进行多环境配置。"><a href="#3-1-在实际开发过程中，往往有多个环境，开发环境、测试环境、生产环境等等。我们需要进行多环境配置。" class="headerlink" title="3.1 在实际开发过程中，往往有多个环境，开发环境、测试环境、生产环境等等。我们需要进行多环境配置。"></a>3.1 在实际开发过程中，往往有多个环境，开发环境、测试环境、生产环境等等。我们需要进行多环境配置。</h4><h5 id="步骤1"><a href="#步骤1" class="headerlink" title="步骤1"></a>步骤1</h5><p>在./config文件夹下新建一个sit.env.js 的文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 测试仿真环境</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  NODE_ENV: &apos;&quot;production&quot;&apos;,</span><br><span class="line">  BASE_API: &apos;&quot;http://120.55.169.121:8888/index&quot;&apos;,</span><br><span class="line">  CRM_PATH: &apos;&quot;http://120.55.169.121:8083&quot;&apos;,        //  其他配置</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>dev.env.js 、prode.env.js 也可进行类似的配置，把各个环境请求的不同端口配置在这</p>
<p>后面在你的程序中，如果要使用这些变量可参考下例<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> baseUrl  = process.env.BASE_API;</span><br><span class="line"><span class="keyword">let</span> crmPath = process.env.CRM_PATH;</span><br><span class="line"><span class="comment">// 创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  baseURL: BASE_API,      <span class="comment">// api的base_url</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h5 id="步骤2"><a href="#步骤2" class="headerlink" title="步骤2"></a>步骤2</h5><p>修改./config/index.js文件，将 sit.env.js 在 index.js 的 build 对象中引入：如图</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6914113-1eac13bbd8c679e9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="引入sit.env.js"></p>
<h5 id="步骤3"><a href="#步骤3" class="headerlink" title="步骤3"></a>步骤3</h5><p>修改./build/build.js 文件，将 process.env.NODE_ENV = ‘production’ 注释或者删除，因为我们在后面需要动态配置NODE_ENV，此步骤如图</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6914113-78dd9623a309044f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="./build/build.js "></p>
<h5 id="步骤4"><a href="#步骤4" class="headerlink" title="步骤4"></a>步骤4</h5><p>修改./build/webpack.prod.conf.js 文件 修改 evn,不BB直接上图</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6914113-b4ec9c1bd85c5516.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="./build/webpack.prod.conf.js"></p>
<p>这样webpack 的配置就修改完了。<br>在这里可以顺便修改一下这个文件下 UglifyJsPlugin，打包构建的时候可以去除console.log，debugger。配置如下。（此步骤和多环境配置无关）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class="line">      compress: &#123;</span><br><span class="line">        warnings: <span class="literal">false</span>,</span><br><span class="line">        drop_debugger: <span class="literal">true</span>,     <span class="comment">// 去除构建的 debugger</span></span><br><span class="line">        drop_console: <span class="literal">true</span>        <span class="comment">//  去除构建的 console</span></span><br><span class="line">      &#125;,</span><br><span class="line">      sourceMap: <span class="literal">true</span></span><br><span class="line">    &#125;),</span><br></pre></td></tr></table></figure></p>
<h5 id="步骤5"><a href="#步骤5" class="headerlink" title="步骤5"></a>步骤5</h5><p>我们需要修改 package.json 的script 语句来增加命令启动我们新增的服务<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"node build/dev-server.js"</span>,</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"node build/dev-server.js"</span>,</span><br><span class="line">    <span class="string">"build:sit"</span>: <span class="string">"NODE_ENV=sit node build/build.js"</span>,</span><br><span class="line">    <span class="string">"build:prod"</span>: NODE_ENV=production node build/build.js<span class="string">"</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br></pre></td></tr></table></figure></p>
<p>然后启动 run run build:sit，可是这个时候报错了，NODE_ENV不被识别，这是由于 windows 不支持 NODE_ENV=sit 设置的方式。我们只需要安装一个 cross-env 的插件即可<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add cross-env -D   <span class="comment">// 或者你使用npm 也可</span></span><br><span class="line">npm install cross-env -dev--save</span><br></pre></td></tr></table></figure></p>
<p>接下来 继续修改一个 script 语句启动即可<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"node build/dev-server.js"</span>,</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"node build/dev-server.js"</span>,</span><br><span class="line">    <span class="string">"build:sit"</span>: <span class="string">"cross-env NODE_ENV=sit node build/build.js"</span>,</span><br><span class="line">    <span class="string">"build:prod"</span>: <span class="string">"cross-env NODE_ENV=production node build/build.js"</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p>
<p>这样 你启动 npm run build:sit  将构建打包测试环境的代码 生成在 dist 文件目录下<br>启动 npm run build:prod  将构建打包生产环境的代码  生成在 dist 文件目录下</p>
<h4 id="3-2-结合-fjpublish-自动化发布到服务器。"><a href="#3-2-结合-fjpublish-自动化发布到服务器。" class="headerlink" title="3.2 结合 fjpublish  自动化发布到服务器。"></a>3.2 结合 <a href="https://github.com/zczhangchao51/fjpublish" target="_blank" rel="external">fjpublish</a>  自动化发布到服务器。</h4><h5 id="步骤1-1"><a href="#步骤1-1" class="headerlink" title="步骤1"></a>步骤1</h5><p>安装 <a href="https://github.com/zczhangchao51/fjpublish" target="_blank" rel="external">fjpublish</a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install fjpublish -g</span><br></pre></td></tr></table></figure></p>
<p>在项目根目录下建立一个 fjpublish.config.js 文件（为fjpublish配置文件）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  modules: [&#123;</span><br><span class="line">    name: <span class="string">'测试环境'</span>,</span><br><span class="line">    env: <span class="string">'sit'</span>,</span><br><span class="line">    ssh: &#123;</span><br><span class="line">      host: <span class="string">'11.11.111.11'</span>,     <span class="comment">// 服务器地址</span></span><br><span class="line">      port: <span class="number">22</span>,                        <span class="comment">// 端口</span></span><br><span class="line">      user: <span class="string">'root'</span>,                   <span class="comment">// 用户</span></span><br><span class="line">      userName: <span class="string">'root'</span>,         <span class="comment">// 用户名</span></span><br><span class="line">      password: <span class="string">'XXXX'</span>        <span class="comment">// 密码</span></span><br><span class="line">    &#125;,</span><br><span class="line">    buildCommand: <span class="string">'build:sit'</span>,    <span class="comment">// 构建命令  === npm run build:sit</span></span><br><span class="line">    localPath: <span class="string">'dist'</span>,                   <span class="comment">// 构建后上传文件</span></span><br><span class="line">    remotePath: <span class="string">'/test/xx'</span>,       <span class="comment">// 服务端路径</span></span><br><span class="line">    postCommands: [<span class="string">'chmod -R 777 /test/xx'</span>]   <span class="comment">// 远程项目文件替换后执行的linux命令</span></span><br><span class="line">  &#125;，｛</span><br><span class="line">    name: <span class="string">'其他环境'</span>,</span><br><span class="line">    env: <span class="string">'other'</span>,</span><br><span class="line">    ....</span><br><span class="line">｝]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>同样的为了方便我们需要修改 package.json 的script mode<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"node build/dev-server.js"</span>,</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"node build/dev-server.js"</span>,</span><br><span class="line">    <span class="string">"build:sit"</span>: <span class="string">"cross-env NODE_ENV=sit node build/build.js"</span>,</span><br><span class="line">    <span class="string">"build:prod"</span>: <span class="string">"cross-env NODE_ENV=production node build/build.js"</span></span><br><span class="line">    <span class="string">"public:sit"</span>: <span class="string">"fjpublish env sit"</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p>
<p>运行命令 npm run  public:sit　确认后就会自动打包build:sit的代码，并且压缩后发布带你指定的服务器上，并且执行你的相应配置，如果需要多环境同时发布，只需要在fjpublish.config.js里面的modules里面增加一个对象进行相关配置即可。</p>
<blockquote>
<p>至此 Vue-cli 项目的前端自动化已经配置好了</p>
</blockquote>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-11-11</span><i class="fa fa-tag"></i><a href="/tags/Vue/" title="Vue" class="tag">Vue </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,http://yoursite.com/2017/11/11/My-New-Post/,Gold_Gold,从0用Vue2.5和Elemnt-ui2搭建一个后台模版（1.搭建框架）,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a role="navigation" href="/2017/11/10/hello-world/" title="Hello World" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>